# Push-and-Rotate--CBS--PrioritizedPlanning
В данном проекте приводятся реализации различных алгоритмов решающих задачи планирования траекторий для группы агентов. Рассматриваются алгоритмы Conflict based search, Push-and-rotate и Prioritized planning, а также некоторые их модификации.

## Компиляция и запуск
Файлы проекта могут быть скомпилированы в Qt Creator с конфигурациями, заданными в файлах PathPlanning.pro и CMakeLists.txt. При запуске название
входного файла передается в качестве первого аргумента командной строки.

## Формат входных данных
Данные поступают в виде файлов в формате XML. Примеры оформления входных и выходного файлов можно найти в разделе Examples. Основной файл содержит разделы map и options:

### Раздел map - задание карты. Содержит следующие тэги:
- width, height - ширина и высота карты (в клетках) - целые числа 
- grid - сама карта, 0 означает свободную клетку, а 1 - препятствие. Ряды обособляются тэгом row, количество рядов должно быть равно height, а количество символов в каждом ряду должно быть равно width.     

### Раздел options - выбор параметров алгоритма и тестов. Содержит следующие тэги:
- algorithm - используемый алгоритм. Может принимать следующие значения:
    1. cbs - Conflict based search
    2. push_and_rotate - Push-and-rotate
    3. prioritized_planning - Prioritized planning
- agents_file - общий префикс названий входных файлов с описанием агентов
- tasks_count - количество входных файлов с описанием агентов: рассматриваются файлы с названиями вида agents_file-n.xml, где n принимает значения от 1 до tasks_count
- agents_range - в атрибутах min и max данного тега указывается минимальное и максимальное количество агентов для тестирования. При тестировании количество агентов увеличивается от min до max, и алгоритм запускается на соотвествующем подмножестве агентов. Тестирование прекращается, если алгоритм работает дольше заданного лимита по времени или не находит решения.
- maxtime - максимальное время работы алгоритма в миллисекундах
- with_cat - будет ли использоваться Conflict avodance table (учитывается если выбран алгоритм cbs)
- with_perfect_h - будет ли производиться предпосчет кратчайших путей от всех вершин до конечных позиций агентов для вычисления оптимальной эвристики в A\* (учитывается для алгоритмов CBS и Prioritized planning).
- logpath - каталог, в который будет сохранен отчет (не обязательный параметр, по умолчанию, отчет сохраняется в тот же каталог, в котором находится входной файл)  
- logfilename - название файла с отчетом (не обязательный параметр, по умолчанию, название файла с отчетом получается из названия входного файла дописыванием строки "_log")

### Файлы с агентами
Каждому агенту соответствует собственный тег agent со следующими атрибутами:
- id - идентификатор агента
- start_i, start_j - координаты стартовой позиции агента (клетки нумеруются с 0, клетка (0, 0) это верхний левый угол карты)
- goal_i, goal_j - координаты конечной позиции агента

## Формат выходных данных
Выходной файл так же содержит разделы map и options, содержание которых совпадает со входным файлом, а также раздел log, в котором содержится сам отчет. Он содержит
следующие тэги:

- mapfilename - название входного файла  
- aggregated_results - результаты тестрирования. Для каждого количества агентов указывается тег result со следующими атрибутами:
    1. agents_count - количество агентов
    2. success_count - количество тестов (среди tasks_count тестовых файлов) для которых алгоритм построил корректное решение в заданное время
    3. makespan - количество итераций до того как последний из агентов закончит движение (усредненное)
    4. flowtime - суммарное количество действий, совершенных агентами с учетом остановок (усредненное)
    5. time - время работы алгоритма (усредненное)
